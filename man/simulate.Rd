% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/generator_new.R
\name{simulate}
\alias{simulate}
\alias{simulate.model_structure}
\alias{simulate.default}
\title{Simulate trials from parameter rows}
\usage{
simulate(
  structure,
  params_df,
  trial_df = NULL,
  seed = NULL,
  keep_detail = FALSE,
  keep_component = NULL,
  layout = c("auto", "rectangular", "long"),
  ...
)

\method{simulate}{model_structure}(
  structure,
  params_df,
  trial_df = NULL,
  seed = NULL,
  keep_detail = FALSE,
  keep_component = NULL,
  layout = c("auto", "rectangular", "long"),
  ...
)

\method{simulate}{default}(structure, ...)
}
\arguments{
\item{structure}{Model structure}

\item{params_df}{Parameter data frame}

\item{trial_df}{Optional trial-level or expanded data frame used to condition
simulation. When `trial_df` includes an `accumulator` column, `onset` and
`component` values are matched by trial and accumulator. If `layout = "long"`
and `trial_df` rows align to `params_df`, those rows are treated as the
accumulator mapping for each trial. Otherwise, values apply to all accumulators
for a trial.}

\item{seed}{Optional RNG seed}

\item{keep_detail}{Whether to retain per-trial detail}

\item{keep_component}{Whether to include the chosen component in the output (if multiple components exist).
If `NULL` (default), fixed mixtures keep the component; sampled mixtures drop it.}

\item{layout}{Parameter layout. `"rectangular"` expects `n_trials * n_acc` rows ordered
by trial then accumulator; `"long"` expects either a `trial_df` with `accumulator`
rows aligned to `params_df`, or a `trial_df` with `component` to infer active
accumulators. `"auto"` chooses based on row counts and component structure.}

\item{...}{Unused; for S3 compatibility}
}
\value{
Data frame of simulated outcomes/RTs (with optional detail). When
  `race_spec(n_outcomes = k)` has `k > 1`, additional ordered readout columns
  are appended as `R2`/`rt2`, `R3`/`rt3`, ..., `Rk`/`rtk`.
}
\description{
Simulate trials from parameter rows
}
\examples{
spec <- race_spec()
spec <- add_accumulator(spec, "A", "lognormal")
spec <- add_outcome(spec, "A_win", "A")
structure <- finalize_model(spec)
params <- c(A.meanlog = 0, A.sdlog = 0.1, A.q = 0, A.t0 = 0)
df <- build_param_matrix(spec, params, n_trials = 3)
simulate(structure, df, seed = 123)
}
